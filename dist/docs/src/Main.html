<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">{-|
Module      : Main
Description : Entry point module
Copyright   : (c) Pawe&#322; Rzepi&#324;ski 2018
License     :  BSD 3
Maintainer  : rzepinski.pawel@email.com
Stability   : experimental
Portability : POSIX
-}</span><span>
</span><a name="line-10"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Main</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-11"></a><span>
</span><a name="line-12"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">Environment</span><span>
</span><a name="line-13"></a><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><a href="Args.html"><span class="hs-identifier">Args</span></a><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><a href="Branch.html"><span class="hs-identifier">Branch</span></a><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><a href="Checkout.html"><span class="hs-identifier">Checkout</span></a><span>
</span><a name="line-17"></a><span class="hs-keyword">import</span><span> </span><a href="Commit.html"><span class="hs-identifier">Commit</span></a><span>
</span><a name="line-18"></a><span class="hs-keyword">import</span><span> </span><a href="Diff.html"><span class="hs-identifier">Diff</span></a><span>
</span><a name="line-19"></a><span class="hs-keyword">import</span><span> </span><a href="Index.html"><span class="hs-identifier">Index</span></a><span>
</span><a name="line-20"></a><span class="hs-keyword">import</span><span> </span><a href="Init.html"><span class="hs-identifier">Init</span></a><span>
</span><a name="line-21"></a><span class="hs-keyword">import</span><span> </span><a href="Log.html"><span class="hs-identifier">Log</span></a><span>
</span><a name="line-22"></a><span class="hs-keyword">import</span><span> </span><a href="Status.html"><span class="hs-identifier">Status</span></a><span>
</span><a name="line-23"></a><span>
</span><a name="line-24"></a><span class="hs-identifier">main</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-25"></a><a name="main"><a href="Main.html#main"><span class="hs-identifier">main</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-26"></a><span>  </span><a name="local-6989586621679088393"><a href="#local-6989586621679088393"><span class="hs-identifier">args</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">getArgs</span><span>
</span><a name="line-27"></a><span>  </span><a name="local-6989586621679088394"><a href="#local-6989586621679088394"><span class="hs-identifier">action</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Args.html#parseArgs"><span class="hs-identifier hs-var">parseArgs</span></a><span> </span><a href="#local-6989586621679088393"><span class="hs-identifier hs-var">args</span></a><span>
</span><a name="line-28"></a><span>  </span><a href="Main.html#runAction"><span class="hs-identifier hs-var">runAction</span></a><span> </span><a href="#local-6989586621679088394"><span class="hs-identifier hs-var">action</span></a><span>
</span><a name="line-29"></a><span>
</span><a name="line-30"></a><span class="hs-identifier">runAction</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Args.html#ArgsResult"><span class="hs-identifier hs-type">ArgsResult</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-31"></a><a name="runAction"><a href="Main.html#runAction"><span class="hs-identifier">runAction</span></a></a><span> </span><span class="hs-special">(</span><a href="Args.html#Error"><span class="hs-identifier hs-var">Error</span></a><span> </span><a name="local-6989586621679088395"><a href="#local-6989586621679088395"><span class="hs-identifier">e</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Main.html#printError"><span class="hs-identifier hs-var">printError</span></a><span> </span><a href="#local-6989586621679088395"><span class="hs-identifier hs-var">e</span></a><span>
</span><a name="line-32"></a><span class="hs-identifier">runAction</span><span> </span><span class="hs-special">(</span><a href="Args.html#Operation"><span class="hs-identifier hs-var">Operation</span></a><span> </span><a name="local-6989586621679088396"><a href="#local-6989586621679088396"><span class="hs-identifier">op</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Main.html#runOperation"><span class="hs-identifier hs-var">runOperation</span></a><span> </span><a href="#local-6989586621679088396"><span class="hs-identifier hs-var">op</span></a><span>
</span><a name="line-33"></a><span>
</span><a name="line-34"></a><span class="hs-identifier">runOperation</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Args.html#OperationType"><span class="hs-identifier hs-type">OperationType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-35"></a><a name="runOperation"><a href="Main.html#runOperation"><span class="hs-identifier">runOperation</span></a></a><span> </span><a href="Args.html#Init"><span class="hs-identifier hs-var">Init</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Init.html#initCommand"><span class="hs-identifier hs-var">initCommand</span></a><span>
</span><a name="line-36"></a><span class="hs-identifier">runOperation</span><span> </span><span class="hs-special">(</span><a href="Args.html#IndexAdd"><span class="hs-identifier hs-var">IndexAdd</span></a><span> </span><a name="local-6989586621679088397"><a href="#local-6989586621679088397"><span class="hs-identifier">path</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Index.html#indexAddCommand"><span class="hs-identifier hs-var">indexAddCommand</span></a><span> </span><a href="#local-6989586621679088397"><span class="hs-identifier hs-var">path</span></a><span>
</span><a name="line-37"></a><span class="hs-identifier">runOperation</span><span> </span><span class="hs-special">(</span><a href="Args.html#IndexRemove"><span class="hs-identifier hs-var">IndexRemove</span></a><span> </span><a name="local-6989586621679088398"><a href="#local-6989586621679088398"><span class="hs-identifier">path</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Index.html#indexRemoveCommand"><span class="hs-identifier hs-var">indexRemoveCommand</span></a><span> </span><a href="#local-6989586621679088398"><span class="hs-identifier hs-var">path</span></a><span>
</span><a name="line-38"></a><span class="hs-identifier">runOperation</span><span> </span><span class="hs-special">(</span><a href="Args.html#Commit"><span class="hs-identifier hs-var">Commit</span></a><span> </span><a name="local-6989586621679088399"><a href="#local-6989586621679088399"><span class="hs-identifier">msg</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Commit.html#commitCommand"><span class="hs-identifier hs-var">commitCommand</span></a><span> </span><a href="#local-6989586621679088399"><span class="hs-identifier hs-var">msg</span></a><span>
</span><a name="line-39"></a><span class="hs-identifier">runOperation</span><span> </span><span class="hs-special">(</span><a href="Args.html#Checkout"><span class="hs-identifier hs-var">Checkout</span></a><span> </span><a name="local-6989586621679088400"><a href="#local-6989586621679088400"><span class="hs-identifier">commit</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Checkout.html#checkoutCommand"><span class="hs-identifier hs-var">checkoutCommand</span></a><span> </span><a href="#local-6989586621679088400"><span class="hs-identifier hs-var">commit</span></a><span>
</span><a name="line-40"></a><span class="hs-identifier">runOperation</span><span> </span><span class="hs-special">(</span><a href="Args.html#Diff"><span class="hs-identifier hs-var">Diff</span></a><span> </span><a name="local-6989586621679088401"><a href="#local-6989586621679088401"><span class="hs-identifier">paths</span></a></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><a href="Diff.html#diffCommand"><span class="hs-identifier hs-var">diffCommand</span></a><span> </span><a href="#local-6989586621679088401"><span class="hs-identifier hs-var">paths</span></a><span>
</span><a name="line-41"></a><span class="hs-identifier">runOperation</span><span> </span><a href="Args.html#Branch"><span class="hs-identifier hs-var">Branch</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Branch.html#branchCommand"><span class="hs-identifier hs-var">branchCommand</span></a><span>
</span><a name="line-42"></a><span class="hs-identifier">runOperation</span><span> </span><a href="Args.html#Log"><span class="hs-identifier hs-var">Log</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Log.html#logCommand"><span class="hs-identifier hs-var">logCommand</span></a><span>
</span><a name="line-43"></a><span class="hs-identifier">runOperation</span><span> </span><a href="Args.html#Status"><span class="hs-identifier hs-var">Status</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Status.html#statusCommand"><span class="hs-identifier hs-var">statusCommand</span></a><span>
</span><a name="line-44"></a><span class="hs-identifier">runOperation</span><span> </span><a href="Args.html#Help"><span class="hs-identifier hs-var">Help</span></a><span> </span><span class="hs-glyph">=</span><span> </span><a href="Main.html#printHelp"><span class="hs-identifier hs-var">printHelp</span></a><span>
</span><a name="line-45"></a><span>
</span><a name="line-46"></a><span class="hs-identifier">printError</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Args.html#ErrorType"><span class="hs-identifier hs-type">ErrorType</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-47"></a><a name="printError"><a href="Main.html#printError"><span class="hs-identifier">printError</span></a></a><span> </span><span class="hs-identifier">_</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-string">&quot;There was an error&quot;</span><span>
</span><a name="line-48"></a><span>
</span><a name="line-49"></a><span class="hs-identifier">printHelp</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><a name="line-50"></a><a name="printHelp"><a href="Main.html#printHelp"><span class="hs-identifier">printHelp</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><a name="line-51"></a><span>  </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-string">&quot;Usage: hagit &lt;operation&gt; [params]&quot;</span><span>
</span><a name="line-52"></a><span>  </span><span class="hs-identifier hs-var">putStrLn</span><span>
</span><a name="line-53"></a><span>    </span><span class="hs-string">&quot;Valid operations are: init, commit, checkout, log, add, remove, status, branch, diff, help&quot;</span><span>
</span><a name="line-54"></a><span>  </span><span class="hs-identifier hs-var">putStrLn</span><span> </span><span class="hs-string">&quot;See README.md for more details.&quot;</span><span>
</span><a name="line-55"></a></pre></body></html>